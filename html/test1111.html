<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Start Up</title>
    <style type="text/css">
    .img_wrap{
        width: 300px;
        height: 300px;
        margin-top: 50px;
    }
    .img_wrap img{
        max-width: 100%;
        max-width: 300px;
        max-height: 300px;
    }

</style>
<script
src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">
    var sel_files=[];
    $(document).ready(function(){
        $("#input_img").on("change", handleImgFileSelect);
    });

    function handleImgFileSelect(e){

        var files = e.target.files;
        var filesArr = Array.prototype.slice.call(files);

        filesArr.forEach(function(f)
        {
            if(!f.type.match("image.*")){
                alert("확장자는");
                return;
            }

            sel_files = f;

            var reader = new FileReader();
            reader.onload = function(e){
                $("#img1").attr("src", e.target.result);
            }
            reader.readAsDataURL(f);

        });
    }

</script>
<script>
    $(document).ready(function(){
        $("#test").on('click', function(){
            console.log("aaaaaaaaaa");
            $("#imgs_wrap").append("<div id='imgs_wrap'><h2><b>미리보기</b></h2><p class='title'>이미지업로드</p><input type='file' id='input_img'/></div><div><div class='img_wrap'><img id='img1'/></div></div>");
        }); 
    });
</script>

</head>
<body>
    <div  id="imgs_wrap">
    <div>
        <h2><b>미리보기</b></h2>
        <p class="title">이미지업로드</p>
        <input type="file" id="input_img"/>
    </div>

    <div >
        <div class="img_wrap">
            <img id="img"/>
        </div>
    </div>
    </div>

    <div>
        <button id="test">테스트</button>
    </div>
</body>
</html>